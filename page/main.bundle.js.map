{"version":3,"sources":["/Users/anuradhawick/Documents/link-sharing/config/index.ts","/Users/anuradhawick/Documents/link-sharing/src async","/Users/anuradhawick/Documents/link-sharing/src/app/app.component.css","/Users/anuradhawick/Documents/link-sharing/src/app/app.component.html","/Users/anuradhawick/Documents/link-sharing/src/app/app.component.ts","/Users/anuradhawick/Documents/link-sharing/src/app/app.module.ts","/Users/anuradhawick/Documents/link-sharing/src/communicator/communicator.ts","/Users/anuradhawick/Documents/link-sharing/src/communicator/pd-peer.ts","/Users/anuradhawick/Documents/link-sharing/src/communicator/ws-messages.ts","/Users/anuradhawick/Documents/link-sharing/src/environments/environment.ts","/Users/anuradhawick/Documents/link-sharing/src/main.ts","util (ignored)"],"names":[],"mappings":"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","file":"main.bundle.js","sourcesContent":["/**\n * Created by anuradhawick on 7/31/17.\n */\nexport const centralServer = '192.248.8.242';\nexport const centralServerWSPort = '8080';\n\n\n\n// WEBPACK FOOTER //\n// /Users/anuradhawick/Documents/link-sharing/config/index.ts","function webpackEmptyContext(req) {\n\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = \"../../../../../src async recursive\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/anuradhawick/Documents/link-sharing/src async\n// module id = ../../../../../src async recursive\n// module chunks = 1","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/anuradhawick/Documents/link-sharing/src/app/app.component.css\n// module id = ../../../../../src/app/app.component.css\n// module chunks = 1","module.exports = \"<!--The whole content below can be removed with the new code.-->\\n<style>\\n\\n    /*** CSS for Loader ***/\\n    .circle-loader {\\n        margin: 0 0 30px 10px;\\n        border: 2px solid rgba(0, 0, 0, 0.2);\\n        border-left-color: #0000FF;\\n        animation-name: loader-spin;\\n        animation-duration: 1s;\\n        animation-iteration-count: infinite;\\n        animation-timing-function: linear;\\n        position: relative;\\n        display: inline-block;\\n        vertical-align: top;\\n    }\\n\\n    .circle-loader,\\n    .circle-loader:after {\\n        border-radius: 50%;\\n        width: 8em;\\n        height: 8em;\\n    }\\n\\n    .load-complete {\\n        -webkit-animation: none;\\n        animation: none;\\n        border-color: #0000FF;\\n        transition: border 500ms ease-out;\\n    }\\n\\n    .checkmark.draw:after {\\n        animation-duration: 800ms;\\n        animation-timing-function: ease;\\n        animation-name: checkmark;\\n        transform: scaleX(-1) rotate(135deg);\\n    }\\n    .checkmark:after {\\n        opacity: 1;\\n        height: 4em;\\n        width: 2em;\\n        transform-origin: left top;\\n        border-right: 2px solid #0000FF;\\n        border-top: 2px solid #0000FF;\\n        content: '';\\n        left: 2em;\\n        top: 4em;\\n        position: absolute;\\n    }\\n\\n    @keyframes loader-spin {\\n        0% {\\n            transform: rotate(0deg);\\n        }\\n        100% {\\n            transform: rotate(360deg);\\n        }\\n    }\\n    @keyframes checkmark {\\n        0% {\\n            height: 0;\\n            width: 0;\\n            opacity: 1;\\n        }\\n        20% {\\n            height: 0;\\n            width: 2em;\\n            opacity: 1;\\n        }\\n        40% {\\n            height: 4em;\\n            width: 2em;\\n            opacity: 1;\\n        }\\n        100% {\\n            height: 4em;\\n            width: 2em;\\n            opacity: 1;\\n        }\\n    }\\n\\n    /*** CSS for animation ***/\\n    .animate-bottom {\\n        position: relative;\\n        -webkit-animation-name: animatebottom;\\n        -webkit-animation-duration: 1s;\\n        animation-name: animatebottom;\\n        animation-duration: 1s\\n    }\\n\\n    @-webkit-keyframes animatebottom {\\n        from {\\n            bottom: -100px;\\n            opacity: 0\\n        }\\n        to {\\n            bottom: 0px;\\n            opacity: 1\\n        }\\n    }\\n\\n    @keyframes animatebottom {\\n        from {\\n            bottom: -100px;\\n            opacity: 0\\n        }\\n        to {\\n            bottom: 0;\\n            opacity: 1\\n        }\\n    }\\n\\n    /** Connecting to PD css**/\\n    .loading:after {\\n        overflow: hidden;\\n        display: inline-block;\\n        vertical-align: bottom;\\n        -webkit-animation: ellipsis steps(4,end) 900ms infinite;\\n        animation: ellipsis steps(4,end) 900ms infinite;\\n        content: \\\"\\\\2026\\\"; /* ascii code for the ellipsis character */\\n        width: 0px;\\n    }\\n\\n    @keyframes ellipsis {\\n        to {\\n            width: 1.25em;\\n        }\\n    }\\n\\n    @-webkit-keyframes ellipsis {\\n        to {\\n            width: 1.25em;\\n        }\\n    }\\n\\n    /*** Basic CSS for page ***/\\n\\n    .pageCenter {\\n        position: absolute;\\n        height: 100%;\\n        width: 100%;\\n        display: table;\\n    }\\n\\n    .middle {\\n        display: table-cell;\\n        vertical-align: middle;\\n        text-align: center;\\n        margin: 0 auto;\\n    }\\n\\n    .inner {\\n        margin-left: auto;\\n        margin-right: auto;\\n    }\\n</style>\\n\\n<div class=\\\"pageCenter\\\">\\n    <div class=\\\"middle\\\">\\n        <!-- Display loader and checkmark when download completes -->\\n        <div *ngIf=\\\"!error\\\" [ngClass]=\\\"downloadComplete==true && !error == true ? 'load-complete circle-loader':'circle-loader'\\\">\\n            <div *ngIf=\\\"downloadComplete && !error\\\" class=\\\"checkmark draw\\\"></div>\\n        </div>\\n        <br><br>\\n\\n        <!--Display error message on error-->\\n        <div *ngIf=\\\"error\\\" id=\\\"myDiv\\\" class=\\\"animate-bottom inner\\\">\\n            <div class=\\\"alert alert-danger\\\" style=\\\"width:50%;display:table;margin:0 auto\\\">\\n                <strong>{{message}}</strong>\\n            </div>\\n        </div>\\n\\n        <div  *ngIf=\\\"loading && !error\\\" style=\\\"font-size: large\\\"><strong>Connecting to PD <span style=\\\"width: 25px;display: inline-block;text-align: left\\\" class=\\\"loading\\\"></span></strong></div>\\n        <div *ngIf=\\\"!loading && !downloadComplete && !error\\\" style=\\\"text-align: center;font-size: large\\\"><strong>Downloading <span id=\\\"percentage\\\">0</span> %</strong>\\n        </div>\\n        <div *ngIf=\\\"!error && downloadComplete\\\" id=\\\"myDiv\\\"   class=\\\"animate-bottom inner\\\">\\n            <strong style=\\\"font-size: x-large;color:#0000FF\\\" >Download Completed !</strong>\\n            <p>Thanks for using Pocket Drive service</p>\\n        </div>\\n    </div>\\n\\n</div>\\n\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/anuradhawick/Documents/link-sharing/src/app/app.component.html\n// module id = ../../../../../src/app/app.component.html\n// module chunks = 1","import { Component, OnInit, NgZone } from '@angular/core';\nimport * as _ from 'lodash';\nimport * as  SimplePeer  from 'simple-peer';\n\nimport { Communicator } from '../communicator/communicator';\n\ndeclare const streamSaver: any;\n\n@Component({\n    selector: 'app-root',\n    templateUrl: './app.component.html',\n    styleUrls: ['./app.component.css']\n})\nexport class AppComponent implements OnInit {\n    communicator: Communicator;\n    loading: boolean = true;\n    percentage: number = 0;\n    interval = null;\n    downloadComplete: boolean = false;\n    error: string = null;\n    message: string = null;\n\n    constructor(private zone: NgZone) {\n    }\n\n    ngOnInit() {\n        this.startSequence();\n    }\n\n    async startSequence() {\n        if (!SimplePeer.WEBRTC_SUPPORT) {\n            this.error = 'WebRTC not supported by your browser';\n            this.message = 'Unfortunately, this browser does not support our link sharing download feature yet. Please switch to google Chrome or Opera';\n            console.error(this.error);\n            return;\n        }\n        if (!streamSaver.supported) {\n            this.error = 'Streaming not supported by your browser';\n            this.message = 'Unfortunately, this browser does not support our link sharing download feature yet. Please switch to google Chrome or Opera';\n            console.error(this.error);\n            return;\n        }\n\n        // connect to the WebSocket server\n        const params = this.obtainPathParams();\n        this.communicator = new Communicator(params[0], params[1]);\n        this.communicator.on('error', this.handleWsError());\n        this.communicator.registerOnServer();\n        const connectionStatus = await this.waitForP2PConnection();\n\n        if (connectionStatus) {\n            this.loading = false;\n            const pd = this.communicator.getPeerObject();\n            const message = {\n                type: 'linkShare',\n                username: params[0],\n                fileId: params[2]\n            };\n            pd.sendBuffer(new Buffer(JSON.stringify(message)), 'json');\n            pd.on('progress', this.updateDownloadBar());\n            pd.on('message', this.handleMessage());\n            this.updateUI();\n        }\n    }\n\n    obtainPathParams() {\n        const origin = window.location.origin;\n        let url = window.location.href;\n        url = url.replace(origin, '').replace('/', '');\n        url = url.trim();\n        return url.split('/');\n    }\n\n    updateDownloadBar() {\n        const localThis = this;\n\n        return (progress) => {\n            if (_.isNumber(progress)) {\n                localThis.percentage = Math.round(progress);\n            }\n        }\n    }\n\n    handleMessage() {\n        const localThis = this;\n\n        return (message, info) => {\n            if (info.type !== 'json') return;\n\n            const msgObj = JSON.parse(message);\n\n            switch (msgObj.type) {\n                case 'error':\n                    localThis.error = msgObj.error;\n                    localThis.message = msgObj.message;\n                    console.error(this.error, this.message);\n                    break;\n            }\n        }\n    }\n\n    updateUI() {\n        this.interval = setInterval(() => {\n            document.getElementById('percentage').innerText = '' + (this.percentage || 0);\n            if (this.percentage === 100) {\n                this.downloadComplete = true;\n                clearInterval(this.interval);\n            }\n        }, 1000);\n    }\n\n    handleWsError() {\n        const localThis = this;\n\n        return (msgObj) => {\n            localThis.error = msgObj.error;\n            localThis.message = msgObj.message;\n            console.error(this.error, this.message);\n        }\n    }\n\n    async waitForP2PConnection() {\n        let attempts = 0;\n        return await new Promise((resolve) => {\n            let int = setInterval(() => {\n                if (this.communicator.isConnectedP2P()) {\n                    resolve(true);\n                    clearInterval(int);\n                } else if (attempts === 10) {\n                    resolve(false);\n                    clearInterval(int)\n                }\n                attempts++;\n            }, 1000);\n        });\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/anuradhawick/Documents/link-sharing/src/app/app.component.ts","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\n\nimport { AppComponent } from './app.component';\nimport { RouterModule, Routes } from '@angular/router';\n\nconst appRoutes: Routes = [\n    { path: '**', component: AppComponent },\n];\n\n@NgModule({\n    declarations: [\n        AppComponent\n    ],\n    imports: [\n        BrowserModule,\n        RouterModule.forRoot(\n            appRoutes\n        )\n    ],\n    providers: [],\n    bootstrap: [AppComponent]\n})\nexport class AppModule {\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/anuradhawick/Documents/link-sharing/src/app/app.module.ts","/**\n * Created by anuradhawick on 7/31/17.\n */\nimport { $WebSocket, WebSocketSendMode } from 'angular2-websocket/angular2-websocket';\nimport uuid from 'uuid/v4';\n\nimport { centralServer, centralServerWSPort } from '../../config';\nimport PDPeer from './pd-peer';\nimport * as wsm from './ws-messages';\n\nexport class Communicator {\n    ws: $WebSocket;\n    registeredDevice: boolean = false;\n    pdPeer: PDPeer = null;\n    username: string = `user-${uuid().toString()}`;\n    deviceId: string = `dev-id-${uuid().toString()}`;\n    callbacks = {\n        error: null,\n    };\n\n    constructor(private targetUsername, private targetDeviceId) {\n        this.ws = new $WebSocket(`ws://${centralServer}:${centralServerWSPort}`);\n        this.ws.onMessage(\n            (msg: MessageEvent) => {\n                this._onMessage(msg.data);\n            },\n            {autoApply: false}\n        );\n        this.ws.setSend4Mode(WebSocketSendMode.Direct);\n    }\n\n    async _onMessage(msg: string) {\n        const obj = JSON.parse(msg);\n        switch (obj.type) {\n            case wsm.registerDevice:\n                if (obj.success) {\n                    this.registeredDevice = true;\n                    let signal = await this.initPeerAndGetSignal();\n                    this._sendOfferToPeer(signal);\n                }\n                break;\n            case wsm.acceptOffer:\n                this.signalSelfPeer(obj.answer);\n                break;\n            case wsm.connectionOffer:\n                if (!obj.success) {\n                    this.callbacks.error && this.callbacks.error(obj);\n                }\n                break;\n        }\n    }\n\n    signalSelfPeer(signals) {\n        signals.forEach((signal) => {\n            this.pdPeer.setSignal(signal)\n        });\n    }\n\n    registerOnServer() {\n        const msg = {\n            type: wsm.registerDevice,\n            data: {username: this.username, deviceId: this.deviceId}\n        };\n\n        this._sendMessageToServer(\n            JSON.stringify(msg)\n        );\n    }\n\n    async initPeerAndGetSignal() {\n        this.pdPeer = new PDPeer();\n        return await this.pdPeer.getSignal();\n    }\n\n    _sendOfferToPeer(signal) {\n        const msg = {\n            type: wsm.connectionOffer,\n            data: {\n                username: this.targetUsername,\n                deviceId: this.targetDeviceId,\n                offer: signal,\n                fromUsername: this.username,\n                fromDeviceId: this.deviceId\n            }\n        };\n\n        this._sendMessageToServer(\n            JSON.stringify(msg)\n        );\n    }\n\n    on(event: 'error', callback: Function) {\n        this.callbacks[event] = callback;\n    }\n\n    _sendMessageToServer(msg: string) {\n        this.ws.send(msg);\n    }\n\n    isConnectedP2P() {\n        return this.pdPeer && this.pdPeer.isConnected();\n    }\n\n    getPeerObject() {\n        return this.pdPeer;\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/anuradhawick/Documents/link-sharing/src/communicator/communicator.ts","/**\n * Created by anuradhawick on 8/1/17.\n */\nimport * as  SimplePeer  from 'simple-peer';\n\ndeclare const streamSaver: any;\n\nconst options = {\n    initiator: true,\n    channelConfig: {},\n    channelName: 'dvios-intercon',\n    config: {\n        iceServers: [\n            {url: 'stun:stun.l.google.com:19302'},\n            {url: 'turn:anuradha@192.248.8.242:3478', username: 'anuradha', credential: 'sanjeewa'}\n        ]\n    },\n    constraints: {},\n    offerConstraints: {},\n    answerConstraints: {},\n    reconnectTimer: false,\n    sdpTransform: function (sdp) {\n        return sdp\n    },\n    stream: false,\n    trickle: true,\n    objectMode: false\n};\n\nexport default class PDPeer {\n    pingReceived;\n    peerObj;\n    connected;\n    callBacks;\n    signalBuffer;\n    dataBuffer;\n    receiveInfo;\n    currentReceiveProgress;\n    fileStream;\n    writer;\n    receivedContent;\n\n    constructor() {\n        this.pingReceived = false;\n        this.peerObj = null;\n        this.connected = false;\n        this.callBacks = {\n            message: null,\n            disconnect: null,\n            signal: null,\n            progress: null,\n            connect: null\n        };\n        this.signalBuffer = [];\n        this.dataBuffer = null;\n        this.receiveInfo = null;\n        this.currentReceiveProgress = 0;\n\n        this.peerObj = new SimplePeer(options);\n\n        // signal event\n        this.peerObj.on('signal', (data) => {\n            this.signalBuffer.push(data);\n        });\n\n        // connected event\n        this.peerObj.on('connect', () => {\n            this.connected = true;\n        });\n\n\n        this.peerObj.on('end', () => {\n            console.log('ended')\n        });\n\n        // data reception event\n        this.peerObj.on('data', (data) => {\n            try {\n                let obj = JSON.parse(data);\n                if (obj.type === 'ping') {\n                    this.pingReceived = true;\n                }\n                // pass down the message\n                this._receiveDataToBuffer(data, false);\n            } catch (e) {\n                this._receiveDataToBuffer(data, true);\n            }\n        });\n    }\n\n    on(event: 'message' | 'disconnect' | 'signal' | 'progress' | 'connect', callback: Function) {\n        this.callBacks[event] = callback;\n    }\n\n    async sendBuffer(buffer, type = null, data = null) {\n        let file = buffer;\n        let i = 0;\n        let metaObj = {\n            sof: true,\n            eof: false,\n            info: {\n                size: file.byteLength\n            },\n            type: type,\n            data: data // To be used at the user level\n        };\n        this.peerObj.send(JSON.stringify(metaObj));\n\n        while (file.byteLength > 0) {\n            this.peerObj.send(file.slice(0, 1024 * 64));\n            file = file.slice(1024 * 64);\n            i++;\n            // For ever 100 chunks wait for ping back to ensure buffer protection\n            if (i === 100) {\n                this.peerObj.send(JSON.stringify({type: 'ping'}));\n                await this._waitForPing();\n                i = 0;\n            }\n        }\n        metaObj.eof = true;\n        metaObj.sof = false;\n        this.peerObj.send(JSON.stringify(metaObj));\n    }\n\n    async getSignal() {\n        let attempts = 0;\n        return await new Promise((resolve) => {\n            let int = setInterval(() => {\n                if (attempts === 10) {\n                    resolve(this.signalBuffer);\n                    clearInterval(int);\n                }\n                attempts++;\n            }, 100);\n        });\n    }\n\n    setSignal(signal) {\n        this.peerObj.signal(signal)\n    }\n\n    isConnected() {\n        return this.connected;\n    }\n\n    async _waitForPing() {\n        let attempts = 0;\n        const status = await new Promise((resolve) => {\n            let int = setInterval(() => {\n                if (this.pingReceived) {\n                    this.pingReceived = false;\n                    resolve(true);\n                    clearInterval(int);\n                } else if (attempts === 50) {\n                    resolve(false);\n                    this.pingReceived = false;\n                    clearInterval(int)\n                }\n                attempts++;\n            }, 10);\n        });\n        return status;\n    }\n\n    _receiveDataToBuffer(data, isBuffer) {\n        if (!isBuffer) {\n            let obj = JSON.parse(data);\n            if (obj.sof) {\n                this.receiveInfo = {info: obj.info, type: obj.type, data: obj.data};\n                this.receivedContent = 0;\n                if (this.receiveInfo.type === 'file') {\n                    this.fileStream = streamSaver.createWriteStream(this.receiveInfo.data.fileName, this.receiveInfo.info.size);\n                    this.writer = this.fileStream.getWriter();\n                } else {\n                    this.dataBuffer = new Buffer(0);\n                }\n            } else if (obj.eof) {\n                if (this.receiveInfo.type === 'file') {\n                    this.writer.close();\n                } else {\n                    this.callBacks.message && this.callBacks.message(this.dataBuffer, this.receiveInfo);\n                }\n                this.currentReceiveProgress = 0;\n            } else {\n                this.receivedContent += data.byteLength;\n                if (this.receiveInfo.type !== 'file') {\n                    this.dataBuffer = Buffer.concat([this.dataBuffer, data]);\n                }\n                this.currentReceiveProgress = (this.receivedContent / this.receiveInfo.info.size) * 100;\n                this.callBacks.progress && this.callBacks.progress(this.currentReceiveProgress);\n            }\n        } else {\n            this.receivedContent += data.byteLength;\n            if (this.receiveInfo.type === 'file') {\n                this.writer.write(data);\n            } else {\n                this.dataBuffer = Buffer.concat([this.dataBuffer, data]);\n            }\n            this.currentReceiveProgress = (this.receivedContent / this.receiveInfo.info.size) * 100;\n            this.callBacks.progress && this.callBacks.progress(this.currentReceiveProgress);\n\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/anuradhawick/Documents/link-sharing/src/communicator/pd-peer.ts","/**\n * Created by anuradhawick on 7/31/17.\n */\nexport const createAccount = 'createAccount';\nexport const registerDevice = 'registerDevice';\nexport const connectionOffer = 'connectionOffer';\nexport const acceptOffer = 'acceptOffer';\nexport const isOnline = 'isOnline';\nexport const getActiveDevices = 'getActiveDevices';\n\n\n\n// WEBPACK FOOTER //\n// /Users/anuradhawick/Documents/link-sharing/src/communicator/ws-messages.ts","// The file contents for the current environment will overwrite these during build.\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\n// The list of which env maps to which file can be found in `.angular-cli.json`.\n\nexport const environment = {\n    production: false\n};\n\n\n\n// WEBPACK FOOTER //\n// /Users/anuradhawick/Documents/link-sharing/src/environments/environment.ts","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n    enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// /Users/anuradhawick/Documents/link-sharing/src/main.ts","/* (ignored) */\n\n\n//////////////////\n// WEBPACK FOOTER\n// util (ignored)\n// module id = 0\n// module chunks = 1"],"sourceRoot":"webpack:///"}